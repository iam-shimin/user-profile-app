(this["webpackJsonpprofile-app"]=this["webpackJsonpprofile-app"]||[]).push([[0],{36:function(e,a,t){},42:function(e,a,t){e.exports=t(72)},69:function(e,a,t){},70:function(e,a,t){},71:function(e,a,t){},72:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(17),l=t.n(c),o=t(5),s=t(11),u=t(3),i=t(10),m=t(2),p=t(9),d=t(21);function E(e){var a=e.id,t=e.label,n=e.name,c=e.type,l=e.value,o=e.className,s=e.onChange,u=Object(d.a)(e,["id","label","name","type","value","className","onChange"]),i=a||n;return r.a.createElement("fieldset",u,r.a.createElement("label",{htmlFor:i},t),r.a.createElement("input",{type:c,value:l,name:n,id:i,className:o,onChange:s&&s}))}E.defaultProps={type:"text"};var f=E,b=t(14),v=t.n(b);function h(e){v.a.defaults.headers.common.Authorization="Bearer ".concat(e)}v.a.defaults.baseURL="https://devgroceryapi.spericorn.com/api",v.a.interceptors.response.use(null,(function(e){return Promise.reject(e)}));var g={get:v.a.get,post:v.a.post},O="LOGIN_PENDING",j="LOGIN_SUCCESS",w="LOGIN_FAILED",N="REGISTER_PENDING",S="REGISTER_SUCCESS",y="REGISTER_FAILED",C="PROFILE_FETCH_SUCCESS";t(36);var _={login:function(e,a){return function(t){t({type:O}),g.post("/auth/login",e).then((function(e){t({type:j,payload:e.data.data}),h(e.data.data.token),a()})).catch((function(e){return t({type:w,payload:e})}))}}},P=Object(o.b)(null,_)((function(e){var a=e.login,t=e.history,c=Object(n.useState)({email:"",password:""}),l=Object(p.a)(c,2),o=l[0],u=l[1];function d(e){var a=e.target,t=a.name,n=a.value;u((function(e){return Object(m.a)(Object(m.a)({},e),{},Object(i.a)({},t,n))}))}return r.a.createElement("section",null,r.a.createElement("form",{className:"form form--login",onSubmit:function(e){e.preventDefault(),a(o,(function(){t.push("/")}))}},r.a.createElement(f,{label:"Email",name:"email",value:o.email,onChange:d}),r.a.createElement(f,{label:"Password",name:"password",value:o.password,onChange:d}),r.a.createElement("button",null,"Submit")),r.a.createElement("div",{className:"w-50 mg-a"},"New here? ",r.a.createElement(s.b,{to:"/register"},"Register")))}));t(69);function I(e){var a=e.term,t=e.desc;return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"term"},a),r.a.createElement("span",{className:"desc"},t))}var D={getProfile:function(){return function(e){e({type:"PROFILE_FETCH_PENDING"}),g.get("/user").then((function(a){console.log(a),e({type:"PROFILE_FETCH_SUCCESS",payload:a.data.data})}))}}},L=Object(o.b)((function(e){return{state:e}}),D)((function(e){var a=e.state,t=e.getProfile,c=a.username,l=a.email,o=a.phone,s=a.updated,u=a.created;return Object(n.useEffect)((function(){t()}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"app-header"},r.a.createElement("span",null,"App"),r.a.createElement("nav",null,r.a.createElement("a",{href:"/logout"},"Logout"))),r.a.createElement("section",{className:"mt-4"},r.a.createElement("h1",{className:"welcome-text"},"Welcome, ",c)),r.a.createElement("section",{className:"w-50 mg-a"},r.a.createElement("h2",null,"Details"),r.a.createElement("span",{className:"time-desc"},"Created: ",r.a.createElement("span",null,u)),r.a.createElement("span",{className:"time-desc"},"Updated: ",r.a.createElement("span",null,s)),r.a.createElement("div",{className:"user-details"},r.a.createElement(I,{term:"Email",desc:l}),r.a.createElement(I,{term:"Phone",desc:o}),["id","firstName","lastName","usertype_id","profilePic","store_id","created_by","updated_by"].map((function(e){return r.a.createElement(I,{term:e,desc:a[e]||"null"})})))))}));function F(e){var a=e.onChange,t=Object(n.useState)({password:"","c-password":""}),c=Object(p.a)(t,2),l=c[0],o=c[1],s=l.password===l["c-password"];function u(e){var a=e.target,t=a.name,n=a.value;o((function(e){return Object(m.a)(Object(m.a)({},e),{},Object(i.a)({},t,n))}))}return Object(n.useEffect)((function(){s&&a({target:{value:l.password,name:"password"}})}),[s,l.password,a]),r.a.createElement(r.a.Fragment,null,r.a.createElement(f,{label:"Password",value:l.password,onChange:u,name:"password",type:"password"}),r.a.createElement(f,{label:"Confirm Password",value:l["c-password"],onChange:u,name:"c-password",type:"password"}),!s&&r.a.createElement("small",{className:"validation-error"},"Passwords should match"))}function R(e){var a=e.name,t=void 0===a?"email":a,c=e.onChange,l=Object(n.useState)(""),o=Object(p.a)(l,2),s=o[0],u=o[1],i=Object(n.useState)(null),m=Object(p.a)(i,2),d=m[0],E=m[1],b=!d;return Object(n.useEffect)((function(){var e=setTimeout((function(){var e;s&&(E(null),(e=s,g.post("/auth/checkMail",{email:e}).then((function(e){return e.data}))).then((function(e){!e.success?E(e):c({target:{name:t,value:s}})})).catch((function(e){return E(e)})))}),1e3);return function(){return clearTimeout(e)}}),[s,t,c]),r.a.createElement(r.a.Fragment,null,r.a.createElement(f,{label:"Email",value:s,name:t,type:"email",className:b?"green-br":"",onChange:function(e){var a=e.target.value;u(a)}}),d&&r.a.createElement("small",{className:"validation-error"},(null===d||void 0===d?void 0:d.message)||(null===d||void 0===d?void 0:d.details)||"Cannot complete request"))}var T={register:function(e,a){return function(t){t({type:N}),g.post("/auth/register",e).then((function(e){t({type:S,payload:e.data}),h(e.data.data.token),a()})).catch((function(e){return t({type:y,payload:e})}))}}},G=Object(o.b)(null,T)((function(e){var a=e.register,t=e.history,c=Object(n.useState)({username:"",email:"",phone:"",password:""}),l=Object(p.a)(c,2),o=l[0],u=l[1],d=Object(n.useCallback)((function(e){var a=e.target,t=a.name,n=a.value;u((function(e){return Object(m.a)(Object(m.a)({},e),{},Object(i.a)({},t,n))}))}),[]);return r.a.createElement("section",null,r.a.createElement("form",{className:"form form--registration-form",onSubmit:function(e){e.preventDefault(),a(o,(function(){t.push("/")}))}},r.a.createElement(f,{label:"User Name",value:o.username,name:"username",onChange:d}),r.a.createElement(R,{name:"email",value:o.email,onChange:d}),r.a.createElement(f,{label:"Phone",value:o.phone,name:"phone",type:"tel",onChange:d}),r.a.createElement(F,{value:o.password,onChange:d}),r.a.createElement("button",null,"Submit")),r.a.createElement("div",{className:"w-50 mg-a"},"Have an account? ",r.a.createElement(s.b,{to:"/login"},"Log In")))})),k=t(38),A=t(39),U=t(41),W=t(40);var x=Object(o.b)((function(e){return{isLoading:e.appPendingState}}))((function(e){var a=e.isLoading;return r.a.createElement("div",{className:"loader".concat(a?" active":"")})}));var H=Object(o.b)((function(e){return{error:e.appErrorState}}))((function(e){var a=e.error,t=!!a;return r.a.createElement("div",{className:"alert-box".concat(t?" active":"")},r.a.createElement("span",null,null===a||void 0===a?void 0:a.message),(null===a||void 0===a?void 0:a.details)&&r.a.createElement("p",null,a.details))})),X=(t(70),function(e){var a=function(a){Object(U.a)(n,a);var t=Object(W.a)(n);function n(){return Object(k.a)(this,n),t.apply(this,arguments)}return Object(A.a)(n,[{key:"render",value:function(){var a=this.props,t=a.isAuthed,n=Object(d.a)(a,["isAuthed"]);return t?r.a.createElement(e,n):r.a.createElement(u.a,{to:"/login"})}}]),n}(r.a.Component);return a.defaultProps={isAuthed:!1},Object(o.b)((function(e){return{isAuthed:!!e.id}}))(a)}(L));var B=function(){return r.a.createElement(s.a,null,r.a.createElement(x,null),r.a.createElement(H,null),r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/login",component:P}),r.a.createElement(u.b,{path:"/register",component:G}),r.a.createElement(u.b,{path:"/",component:X}),r.a.createElement(u.a,{to:"/"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J,M=t(12),V=t(25),q={};J=window.__REDUX_DEVTOOLS_EXTENSION__?Object(M.c)(Object(M.a)(V.a),window.__REDUX_DEVTOOLS_EXTENSION__()):Object(M.a)(V.a);var z=Object(M.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,a=arguments.length>1?arguments[1]:void 0;if(a.type.endsWith("PENDING"))return Object(m.a)(Object(m.a)({},e),{},{appPendingState:!0});if(a.type.endsWith("FAILED"))return Object(m.a)(Object(m.a)({},e),{},{appErrorState:a.payload,appPendingState:!1});switch(a.type){case S:return Object(m.a)(Object(m.a)(Object(m.a)({},e),a.payload.data.userData),{},{appPendingState:!1,appErrorState:null});case j:case C:return Object(m.a)(Object(m.a)(Object(m.a)({},e),a.payload.userData),{},{appPendingState:!1,appErrorState:null});default:return e}}),{},J);t(71);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:z},r.a.createElement(B,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.497227fb.chunk.js.map